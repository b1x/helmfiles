repositories:
  - name: stable
    url: https://kubernetes-charts.storage.googleapis.com

releases:
  - name: prometheus
    namespace: monitor
    chart: stable/prometheus
    version: "9.7.2"
    installed: true
    # wait: true
    values:
      - nameOverride: prometheus

        server:
          enabled: true
          server:
            ingress:
              enabled: '{{ env "PROMETHEUS_INGRESS_ENABLED" | default "false" }}'
              annotations:
                kubernetes.io/ingress.class: nginx
                nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
                cert-manager.io/cluster-issuer: "letsencrypt-prod"
              hosts:
                - '{{ env "PROMETHEUS_HOST" }}'
              tls:
                - secretName: prometheus-tls
                  hosts:
                    - '{{ env "PROMETHEUS_HOST" }}'

          persistentVolume:
            enabled: true
            storageClass: "efs"

        alertmanager:
          enabled: false
          persistentVolume:
            enabled: true
            storageClass: "efs"

        kubeStateMetrics:
          enabled: false
