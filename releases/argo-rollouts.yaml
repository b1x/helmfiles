repositories:
  - name: incubator
    url: https://kubernetes-charts-incubator.storage.googleapis.com

releases:
  - name: argo-rollouts
    namespace: argo-rollouts
    chart: incubator/raw
    version: "0.1.0"
    installed: true
    wait: true
    force: true
    recreatePods: true
    hooks:
      - events: ["postsync"]
        showlogs: true
        command: "/bin/sh"
        args:
          [
            "-c",
            "kubectl apply -n argo-rollouts -f https://raw.githubusercontent.com/argoproj/argo-rollouts/stable/manifests/install.yaml",
          ]
    values:
      - resources:
          - apiVersion: v1
            kind: ConfigMap
            metadata:
              labels:
                app: argo-rollouts
                app.kubernetes.io/name: argo-rollouts
              name: argo-rollouts
            data:
              NAME: argo-rollouts
