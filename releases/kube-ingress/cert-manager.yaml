repositories:
  - name: jetstack
    url: https://charts.jetstack.io
  - name: incubator
    url: https://kubernetes-charts-incubator.storage.googleapis.com

environments:
  default:
    values:
      - ../../environments/default.yaml
  eks-demo:
    values:
      - ../../environments/eks-demo.yaml

releases:
  - name: cert-manager
    namespace: kube-ingress
    chart: jetstack/cert-manager
    version: ~v0.13.0
    installed: true
    wait: true
    hooks:
      - events: ["prepare"]
        showlogs: true
        command: "/bin/sh"
        args:
          - -c
          - kubectl apply --validate=false -f ./cert-manager-0.13/
    values:
      - cert-manager.yaml.gotmpl

  - name: cert-manager-issuers
    namespace: kube-ingress
    chart: incubator/raw
    version: ~0.2.3
    installed: true
    # wait: true
    values:
      - ./cert-manager/cert-manager-issuers.yaml.gotmpl
