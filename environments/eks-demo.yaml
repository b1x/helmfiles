# common
cluster:
  name: eks-demo

aws:
  region: ap-northeast-2

base:
  domain: demo.mzdev.be

# kube-ingress
cert-manager:
  issuer-email: me@nalbam.com

nginx-ingress:
  controller:
    kind: DaemonSet
  external-dns:
    hostname: "*.demo.mzdev.be"
    ttl: "300"
  metrics:
    enabled: true

external-dns:
  iam-role: eks-demo-worker-route53

# kube-system
cluster-autoscaler:
  iam-role: eks-demo-worker-asg

k8s-spot-termination-handler:
  slackUrl: ""

efs-provisioner:
  iam-role: eks-demo-worker-efs
  efsFileSystemId: "fs-1798c376"

# monitor
prometheus:
  persistence:
    enabled: true
    storageClass: efs
  kubeStateMetrics:
    enabled: true

grafana:
  username: admin
  password: password
  disable_login_form: true
  ingress:
    enabled: true
    host: grafana.demo.mzdev.be
  persistence:
    enabled: true
    storageClass: efs
  oic:
    client:
      id: grafana
      secret: 9a3084e9-5272-4efc-a9d0-304615868a5e
    server:
      token: https://keycloak.demo.mzdev.be/auth/realms/demo/protocol/openid-connect/token
      auth: https://keycloak.demo.mzdev.be/auth/realms/demo/protocol/openid-connect/auth
      userinfo: https://keycloak.demo.mzdev.be/auth/realms/demo/protocol/openid-connect/userinfo

fluentd:
  host: elasticsearch-master.elastic.svc.cluster.local
  port: 9200

# elastic
elasticsearch:
  ingress:
    enabled: false
    host: elasticsearch.demo.mzdev.be
  persistence:
    storageClass: efs
  # esJavaOpts: "-Xmx512m -Xms512m"
  resources:
    requests:
      cpu: 300m
      memory: 2G
    limits:
      cpu: 330m
      memory: 2G

kibana:
  ingress:
    enabled: true
    host: kibana.demo.mzdev.be
  resources:
    requests:
      cpu: 200m
      memory: 1G
    limits:
      cpu: 220m
      memory: 1G

# argo
argo:
  ingress:
    enabled: true
    host: argo.demo.mzdev.be
  bucket: eks-demo-argo-2
  iam-role: eks-demo-worker-bucket

argo-cd:
  username: admin
  # password: "$(htpasswd -nbBC 10 '' 'password' | tr -d ':\n' | sed 's/$2y/$2a/')"
  password: "$2a$10$RihNM/bmql87aKhSa/U0DOmTx5JDPl2byap07bLSNRtsEXFiq87E2"
  # mod-time: "$(date -u +'%Y-%m-%dT%H:%M:%SZ')"
  mod-time: "2020-03-14"
  metrics:
    enabled: true
  ingress:
    enabled: true
    host: argocd.demo.mzdev.be
  oic:
    client:
      id: argo-cd
      secret: d15d2335-2cef-4eb1-bf36-40ac7583c711
    server:
      issuer: https://keycloak.demo.mzdev.be/auth/realms/demo

# keycloak
keycloak:
  username: admin
  password: password
  ingress:
    enabled: true
    host: keycloak.demo.mzdev.be

# devops
chartmuseum:
  ingress:
    enabled: true
    host: chartmuseum.demo.mzdev.be
  iam-role: eks-demo-worker-bucket
  storage:
    amazon:
      region: ap-northeast-2
      bucket: eks-demo-chartmuseum-2

docker-registry:
  ingress:
    enabled: true
    host: registry.demo.mzdev.be
  iam-role: eks-demo-worker-bucket
  s3:
    region: ap-northeast-2
    bucket: eks-demo-registry-2

jenkins:
  ingress:
    enabled: true
    host: jenkins.demo.mzdev.be
  persistence:
    enabled: true
    storageClass: efs
  oic:
    client:
      id: jenkins
      secret: 23a2c36f-d4b2-4566-97bf-5ee53899111c
    server:
      token: https://keycloak.demo.mzdev.be/auth/realms/demo/protocol/openid-connect/token
      auth: https://keycloak.demo.mzdev.be/auth/realms/demo/protocol/openid-connect/auth
      userinfo: https://keycloak.demo.mzdev.be/auth/realms/demo/protocol/openid-connect/userinfo
  resources:
    requests:
      cpu: 500m
      memory: 2G
    limits:
      cpu: 550m
      memory: 2G

sonatype-nexus:
  ingress:
    enabled: true
    host: nexus.demo.mzdev.be
  persistence:
    enabled: true
    storageClass: efs
  nexusBackup:
    persistence:
      enabled: true
      storageClass: efs
  resources:
    requests:
      cpu: 300m
      memory: 2G
    limits:
      cpu: 330m
      memory: 2G

sonarqube:
  ingress:
    enabled: true
    host: sonarqube.demo.mzdev.be
  persistence:
    enabled: true
    storageClass: efs
  postgresql:
    persistence:
      enabled: true
      storageClass: efs
  resources:
    requests:
      cpu: 300m
      memory: 2G
    limits:
      cpu: 330m
      memory: 2G

harbor:
  admin:
    password: password
  ingress:
    host:
      core: harbor-core.demo.mzdev.be
      notary: harbor-notary.demo.mzdev.be
  persistence:
    storageClass: efs
  storage:
    amazon:
      region: ap-northeast-2
      bucket: eks-demo-harbor-2
